@import '../../modules/objects/dropdown/dropdown.json';
/// Dropdown
///
/// @author [@esr360](http://twitter.com/esr360)
/// @access public
/// @group objects
///
/// @param {map} $custom - where custom config will be passed
@mixin dropdown($custom: custom('dropdown')) {

    // Config
    $dropdown: config($dropdown, $custom);

    //*************************************************************
    // Module
    //*************************************************************

    @include module('#{retrieve-value(('navigation', $navigation), 'name')}') {

        // parent menus
        ul {

            margin: 0;
            
            // show the dropdown
            li {	
                &:hover {
                    > ul {
                        opacity: 1;
                        visibility: visible;
                        z-index: 8;
                    }
                }
            }
            
            // dropdown menus
            ul {
            
                @include extend($parent: 'list', $modifiers: 'reset');
                min-width: this('width');
                text-align: this('text-align');
                transition: core('transition');
                font-size: this('font-size');
                position: absolute;
                z-index: 7;
                // hide until required
                opacity: 0;
                visibility: hidden;
            
                li {
            
                    position: relative;
            
                    a {
                        background: this('link-bg-color');
                        color: this('link-color');
                        padding: this('link-padding');
                        border-top: 1px solid color('greyscale', 'grey-2'); 
                        &:before, &:after {
                            font-family: FontAwesome;		
                        }
                        &:not(:only-child) {
                            padding-right: this('link-padding') + 1rem;
                            &:after {
                                content: this('dropdown-icon');
                                right: 0.75em;
                                @include vertical-center(absolute);
                            }
                        }
                    }
            
                    // remove top border on first item
                    &:first-child {
                        > a {
                            border-top-color: transparent;
                        }
                    }
                    
                    // remove bottom border on last item
                    &:last-child {
                        > a {
                            // border-bottom-color: transparent;
                        }
                    }
            
                    &:hover {
                        > a {
                            color: this('link-hover-color');
                            background: this('link-hover-bg-color');
                            border-color: color('brand', 'brand-1');
                        }
                        + li {
                            > a {
                                border-top-color: color('greyscale', 'grey-1');
                            }
                        }
                    }
            
                    &.active {
                        > a {
                            color: this('link-active-color');
                            background: this('link-active-bg-color');
                        }
                    }

                    &:hover {
                        > ul {
                            left: 50%;
                        }
                    }
            
                    ul {
                        top: 0;
                        left: 80%;
                        box-shadow: 1px 1px 6px 1px rgba(black, 0.2);
                        li {
                            a {
                                border-left: 1px solid color('greyscale', 'grey-2');
                            }
                        }
                    }
            
                } // li
            
            } // ul
            
            // first level only
            > ul {
                padding-top: this('top-position');
            }
        
        } // ul (parent)

        //*********************************************************
        // Custom Content
        //*********************************************************

        @content;
        
    } // module

} // @mixin dropdown