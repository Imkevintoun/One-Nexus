<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: tools/js/app.smoothScroll.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: tools/js/app.smoothScroll.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Animate scrolling to anchor links
 * 
 * @access public
 * @see https://codepen.io/rleve/pen/iCbgy
 * 
 * @todo fix downwards scroll when &lt;html> tag has height value of 100% 
 * 
 * @param {Object} custom - where custom options are passed
 */
export function smoothScroll(custom) {

    /**
     * @param {Number} [options.speed=300] - the animation duration (milliseconds)
     * @param {Number} [options.increments=16] - increments to scroll by
     */
    const options = Object.assign({
        speed: 300,
        increments: 16
    }, custom);

    // Define smooth scroll links
    const scrollToggle = document.querySelectorAll('a[href^="#"]:not([rel="modal"])');

    // Function to animate the scroll
    const smoothScroll = (anchor, duration) => {
        // Calculate how far and how fast to scroll
        var startLocation = window.pageYOffset;
        var endLocation = anchor.offsetTop;
        var distance = endLocation - startLocation;
        var increments = distance/(duration/options.increments);

        // Scroll the page by an increment, and check if it's time to stop
        const animateScroll = () => {
            window.scrollBy(0, increments);
            stopAnimation();
        };

        // Stop animation when you reach the anchor OR the bottom of the page
        const stopAnimation = () => {
            var travelled = window.pageYOffset;
            var down = (travelled >= (endLocation - increments)) || ((window.innerHeight + travelled) >= document.body.offsetHeight);
            var up = travelled &lt;= (endLocation || 0);
            var shouldStop = (increments >= 0) ? down : up;

            if (shouldStop) {
                clearInterval(runAnimation);
            }
        };

        // Loop the animation function
        const runAnimation = setInterval(animateScroll, options.increments);
    };

    // For each smooth scroll link
    scrollToggle.forEach(toggle => {
        // When the smooth scroll link is clicked
        toggle.addEventListener('click', e => {
            // Prevent the default link behavior
            e.preventDefault();

            // Get anchor link and calculate distance from the top
            var dataID = toggle.getAttribute('href');
            var dataTarget = document.querySelector(dataID);

            // If the anchor exists, scroll to it
            if (dataTarget) {
                smoothScroll(dataTarget, options.speed);
            }
        }, false);
    });

}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#accordion">accordion</a></li><li><a href="global.html#carousel">carousel</a></li><li><a href="global.html#colors">colors</a></li><li><a href="global.html#core">core</a></li><li><a href="global.html#custom">custom</a></li><li><a href="global.html#evalConfig">evalConfig</a></li><li><a href="global.html#evalValue">evalValue</a></li><li><a href="global.html#getFunctionName">getFunctionName</a></li><li><a href="global.html#getParams">getParams</a></li><li><a href="global.html#googleMap">googleMap</a></li><li><a href="global.html#grid">grid</a></li><li><a href="global.html#header">header</a></li><li><a href="global.html#inViewport">inViewport</a></li><li><a href="global.html#isValidSelector">isValidSelector</a></li><li><a href="global.html#media">media</a></li><li><a href="global.html#modal">modal</a></li><li><a href="global.html#overlay">overlay</a></li><li><a href="global.html#parents">parents</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#preloader">preloader</a></li><li><a href="global.html#progressBar">progressBar</a></li><li><a href="global.html#scrollSpy">scrollSpy</a></li><li><a href="global.html#scrollTop">scrollTop</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#sideNav">sideNav</a></li><li><a href="global.html#smoothScroll">smoothScroll</a></li><li><a href="global.html#tabs">tabs</a></li><li><a href="global.html#tooltips">tooltips</a></li><li><a href="global.html#typography">typography</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Oct 06 2017 23:00:40 GMT+1100 (AEDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
